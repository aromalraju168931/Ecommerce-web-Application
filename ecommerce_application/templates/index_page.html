{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>megmar</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
background:#f4f6fb;
font-family:Segoe UI;
}

/* NAVBAR */
.navbar{
background:#0f172a;
position:sticky;
top:0;
z-index:9999;
}

.navbar-brand{
font-weight:bold;
font-size:22px;
color:white!important;
}

.nav-link{
color:#e5e7eb!important;
font-weight:500;
}

.search-box{
width:400px;
position:relative;
}

.search-box input{
width:100%;
padding:10px 40px 10px 12px;
border-radius:8px;
border:none;
}

.search-box span{
position:absolute;
right:10px;
top:8px;
}

/* PROFILE */
.avatar{
width:38px;
height:38px;
background:#6366f1;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
color:white;
font-weight:bold;
cursor:pointer;
}

/* CAROUSEL */
.carousel-item img{
height:350px;
object-fit:cover;
border-radius:12px;
}

/* CATEGORY CARDS */
.category{
background:white;
padding:20px;
border-radius:12px;
text-align:center;
box-shadow:0 6px 15px rgba(0,0,0,0.08);
transition:0.3s;
}
.category:hover{
transform:translateY(-5px);
}

/* PRODUCTS */
.product-card{
background:white;
padding:18px;
border-radius:14px;
box-shadow:0 8px 20px rgba(0,0,0,0.08);
transition:0.3s;
}
.product-card:hover{
transform:translateY(-6px);
}

.product-card img{
width:100%;
height:200px;
object-fit:cover;
border-radius:10px;
transition:0.3s;
}
.product-card:hover img{
transform:scale(1.05);
}

.price{
font-weight:bold;
font-size:18px;
margin:10px 0;
}

.add-btn{
background:#4f46e5;
color:white;
border:none;
padding:10px;
border-radius:8px;
width:100%;
transition:0.2s;
}
.add-btn:hover{
background:#4338ca;
transform:scale(1.03);
}

/* FOOTER */
footer{
background:#0f172a;
color:white;
padding:40px;
margin-top:40px;
}
.desc-scroll{
    height:60px;          /* fixed height */
    overflow-y:auto;      /* vertical scroll */
    font-size:14px;
    padding-right:5px;
    margin-bottom:10px;
}

/* optional nice scrollbar */
.desc-scroll::-webkit-scrollbar{
    width:4px;
}

.desc-scroll::-webkit-scrollbar-thumb{
    background:#ccc;
    border-radius:10px;
}


</style>
</head>

<body>
    
{% if messages %}
    {% for msg in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}
{% endif %}

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg">
<div class="container">

<a class="navbar-brand" href="#">üõçÔ∏è MegMar</a>

<button class="navbar-toggler bg-light" data-bs-toggle="collapse" data-bs-target="#navMenu">‚ò∞</button>

<div class="collapse navbar-collapse" id="navMenu">

<ul class="navbar-nav me-auto ms-3">
<li class="nav-item"><a class="nav-link" href="{% url 'index_page' %}">Home</a></li>
<li class="nav-item"><a class="nav-link" href="{% url 'cart_view' %}">Cart</a></li>
</ul>
<form method="GET" action="{% url 'index_page' %}">
    {%csrf_token %}
<div class="search-box me-3">
<input type="text" placeholder="Search products..." name="q" value="{{q}}">
<span><button type="submit" style="background: none; border: none;">üîç</button></span>
</form>
</div>

<div class="dropdown">

    <!-- Avatar Button -->
    <div class="avatar rounded-circle bg-primary text-white d-flex 
                align-items-center justify-content-center"
         style="width:40px;height:40px;cursor:pointer;"
         data-bs-toggle="dropdown">

        {{ request.session.email|default:"P"|first|upper }}

    </div>

    <!-- Dropdown Menu -->
    <ul class="dropdown-menu dropdown-menu-end shadow">

        <li>
            <a class="dropdown-item" href="{% url 'profile_view' %}">
                üë§ My Account
            </a>
        </li>

        <li>
            <a class="dropdown-item" href="{% url 'user_reg' %}">
                üìù Register Account
            </a>
        </li>

        <li><hr class="dropdown-divider"></li>

        <li>
            <a class="dropdown-item text-danger" href="#">
                üóë Delete Account
            </a>
        </li>

    </ul>

</div>


</div>
</div>
</nav>

<!-- CAROUSEL -->
<div class="container mt-4">

<div id="carouselExample" class="carousel slide" data-bs-ride="carousel">

<div class="carousel-inner">

<div class="carousel-item active">
<img src="{% static 'images/online1.jpg' %}" class="d-block w-100">
</div>

<div class="carousel-item">
<img src="{% static 'images/online2.jpg' %}" class="d-block w-100">
</div>

<div class="carousel-item">
<img src="{% static 'images/online3.jpg' %}" class="d-block w-100">
</div>

</div>

<button class="carousel-control-prev" data-bs-target="#carouselExample" data-bs-slide="prev">
<span class="carousel-control-prev-icon"></span>
</button>

<button class="carousel-control-next" data-bs-target="#carouselExample" data-bs-slide="next">
<span class="carousel-control-next-icon"></span>
</button>

</div>
</div>

<!-- CATEGORY CARDS -->
<div class="container mt-5">
<div class="row g-4">

<div class="col-md-3"><div class="category">üî• Top Deals</div></div>
<div class="col-md-3"><div class="category">üöö Free Delivery</div></div>
<div class="col-md-3"><div class="category">‚≠ê Best Sellers</div></div>
<div class="col-md-3"><div class="category">üÜï New Arrivals</div></div>

</div>
</div>
<div class="d-flex justify-content-center align-items-center mt-5">
    <h3>{% if q %}Search results for {{q}}
        {% else %}All products
        {% endif %}
    </h3>
</div>
<!-- PRODUCTS -->
<div class="container mt-5">

<h3 class="mb-4">Trending Products</h3>

<div class="row g-4">

{% for i in products_view %}
<div class="col-md-3">

<div class="product-card">

{% if i.product_image %}
<img src="{{ i.product_image.url }}">
{% else %}
<img src="/static/images/no-image.png">
{% endif %}

<h5 class="mt-3">{{i.products_name}}</h5>
<div class="desc-scroll">
    {{i.product_description}}
</div>
<div class="price">‚Çπ {{i.product_price}}</div>
<p><i style="color:green;">{{i.product_discound}}</i><b style="color: red;" class="p-2">off</b></p>
<form action="{% url 'add_to_cart' i.id%}" method="post">
    {% csrf_token %}
<button class="add-btn" type="submit">Add to Cart</button>
</form>
</div>
</div>
{% endfor %}

</div>
</div>

<!-- FOOTER -->
<footer class="text-center">
<h5>üõçÔ∏è megmar</h5>
<p>Online Shoppery Market</p>
<p>¬© 2026 All rights reserved</p>
</footer>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
